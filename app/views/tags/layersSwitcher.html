<div class="tier1">
  <div class="tier1_header">
    <i class="icon-plus icon-white"></i>
    <input id="toggler-0" type="checkbox" class="source-toggler" />
    <h3>&{"app.ownWms.sourceName"}</h3>
  </div>
  <div id="addWmsTier1Content" class="tier1_content well">
    <button id="addWmsButton" class="btn" type="button" data-toggle="modal" data-target="#addWmsModal" data-id="0">&{"app.ownWms.addButton"}</button>
  </div>
</div>

#{list _sources, as:'source'}
#{if models.MapSourceCollection.getInstance().canBeUsed(source)}
<div class="tier1">

  <div class="tier1_header">
    <i class="icon-plus icon-white"></i>
    <input id="toggler-${source.id}" type="checkbox" class="source-toggler" />
    <h3>${source.displayName}</h3>
  </div>

  <div class="tier1_content well">
  #{list source.webMapServices, as:'service'}
  #{if models.MapServiceCollection.getInstance().canBeUsed(service)}

    <div class="tier2">

      <div class="tier2_header">
        <i class="icon-plus icon-white"></i>
        <input id="toggler-${source.id}-${service.id}" type="checkbox" class="wms-toggler" />
        <h4>${service.displayName}</h4>
      </div>

      <div class="tier2_content">
      #{list service.layers, as: 'layer'}
      #{if layer.canBeUsed}
        <div class="tier3">
          <div class="tier3_content">
            <input id="toggler-${source.id}-${service.id}-${layer.id}" type="checkbox" class="layer-toggler" />
            <span class="btn btn-mini" data-toggle="button">&middot; &middot; &middot;</span>
            <label for="toggler-${source.id}-${service.id}-${layer.id}">${layer.displayName}</label>
            <div class="layer-details">
              <i class="icon-minus-sign"></i>
              <span>100%</span>
              <i class="icon-plus-sign"></i>
            </div>
          </div>
         </div>
      #{/if}
      #{/list}
      </div>

    </div>

  #{/if}
  #{/list}
  </div>

</div>
#{/if}
#{/list}
